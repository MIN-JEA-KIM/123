<!DOCTYPE html>
{% load static %}
<html lang="zxx">
  <head>
    <!-- Required meta tags -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>World Vision</title>
    <!-- plugin css for this page -->
    <link
      rel="stylesheet"
      href="{% static 'assets/vendors/mdi/css/materialdesignicons.min.css' %}"
    />
    <link rel="stylesheet" href="{% static 'assets/vendors/aos/dist/aos.css/aos.css' %}" />
    <link
      rel="stylesheet"
      href="{% static 'assets/vendors/owl.carousel/dist/assets/owl.carousel.min.css' %}"
    />
    <link
      rel="stylesheet"
      href="{% static 'assets/vendors/owl.carousel/dist/assets/owl.theme.default.min.css' %}"
    />
    <!-- End plugin css for this page -->
    <link rel="shortcut icon" href="{% static 'assets/images/favicon.png' %}" />
    <!-- inject:css -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <!-- endinject -->

     <!-- Google icon -->
     <link
     href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
     rel="stylesheet">

    <script type="text/javascript">
      function showClock(){
        var currentDate = new Date();
        var divClock = document.getElementById('divClock');
        var msg = "";
        if(currentDate.getHours()>12){
          msg += "ì˜¤í›„ ";
          msg += currentDate.getHours()-12+"ì‹œ ";
       }
       else {
         msg += "ì˜¤ì „ ";
         msg += currentDate.getHours()+"ì‹œ ";
       }

        msg += currentDate.getMinutes()+"ë¶„ ";

        divClock.innerText = msg;

        if (currentDate.getMinutes()>58) {
          divClock.style.color="red";
        }
        setTimeout(showClock,1000);
      }

      // ì¶”ì²œ ë²„íŠ¼ ì²˜ë¦¬
      $('.recommend').click(function(){
      var pk = $(this).attr('name') // í´ë¦­í•œ ìš”ì†Œì˜ attribute ì¤‘ nameì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
      $.ajax({
        type: "POST", // ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ë°©ë²•ì„ ì§€ì •í•œë‹¤.
        url: "{% url 'recommend' %}", // í†µì‹ í•  urlì„ ì§€ì •í•œë‹¤.
        data: {'pk': pk, 'csrfmiddlewaretoken': '{{ csrf_token }}'}, // ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ì´ ì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤.
        dataType: "json", // ì„œë²„ì¸¡ì—ì„œ ì „ì†¡í•œ ë°ì´í„°ë¥¼ ì–´ë–¤ í˜•ì‹ì˜ ë°ì´í„°ë¡œì„œ í•´ì„í•  ê²ƒì¸ê°€ë¥¼ ì§€ì •í•œë‹¤. ì—†ìœ¼ë©´ ì•Œì•„ì„œ íŒë‹¨í•œë‹¤.
        // ì„œë²„ì¸¡ì—ì„œ ì „ì†¡í•œ ë°ì´í„° views.py like ë©”ì†Œë“œ
        // context = {'likes_count' : memo.total_likes, 'message' : message}
        // json.dump(context)ë¥¼ í†µí•´ì„œ json í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ëœë‹¤.

        success: function(response){ // ì„±ê³µí–ˆì„ ë•Œ í˜¸ì¶œí•  ì½œë°±ì„ ì§€ì •í•œë‹¤.
          id = $(this).attr('name')
          $('#count'+ pk).html("count : "+ response.recommend_count);
          alert(response.message);
          alert("ì¶”ì²œìˆ˜ :" + response.recommend.count);
        },
        error:function(request,status,error){
          alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
        }
    });
  })
    </script>
  </head>

  <body onload="showClock()">
    <div class="container-scroller">
      {% include '_navbar.html' %}
      <div class="container">
        <div class="row">
          <div class="col-sm-12">
            <div class="text-left">
              <div class="d-flex justify-content-between align-items-center navbar-top">
                <h1 class="font-weight-600 mt-5">
                  {{ news.n_title }}
                </h1>
                <h4 class="font-weight-600 mt-5">
                  <a href='{{ news.o_link }}' style="color:blue;">ì›ë³¸ë§í¬</a>
                </h4>
              </div>
              <br>
                <img src="{{ news.nd_img }}" class="rounded mx-auto d-block" alt="world-news"/>
                <div class="d-flex justify-content-between align-items-center navbar-top">
                  <br>
                  {{ news.ns_content }}
                  <br>
                </div>
                <br>  
                <br>
                {{ news.n_content }}
                <br>
                <br>   
                  <!-- ì¡°íšŒìˆ˜ -->
                  <h5>ğŸ–±ì¡°íšŒìˆ˜:{{view.view_count}}   
                    <br>
                    <!-- ì¶”ì²œ -->
                    <input type="button" class="ì¶”ì²œ" name="{{ r_count.id }}" value="ì¶”ì²œ">
                    <p id="count{{ r_count.n_id }}">ì¶”ì²œ: {{ r_count.total_recommend}}</p>
                  </div>
            </div>
          </div>
        </div>
        <div class="row">
          
        </div>
      </div>
    </div>
    <!-- container-scroller ends -->
    <!-- partial:../partials/_footer.html -->
    {% include '_footer.html' %}

    <!-- partial -->
    <!-- inject:js -->
    <script src="{% static 'assets/vendors/js/vendor.bundle.base.js' %}"></script>
    <!-- endinject -->
    <!-- plugin js for this page -->
    <script src="{% static 'assets/vendors/aos/dist/aos.js/aos.js' %}"></script>
    <script src="{% static 'assets/vendors/owl.carousel/dist/owl.carousel.min.js' %}"></script>
    <!-- End plugin js for this page -->
    <!-- Custom js for this page-->
    <script src="{% static 'assets/js/demo.js' %}"></script>
    <!-- End custom js for this page-->
  </body>
</html>

